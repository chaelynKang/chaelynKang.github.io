---
layout: single
title: " AWS 1일차 "
categories: keduit
tags: [ AWS, Cloud ]
toc: true 
comments: true
author_profile: true
sidebar:
    nav: "docs"
---

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/9ecaf616-a579-4705-8605-dbfbceea987d)


# Region

* AWS의 모든 서비스가 존재하는 물리적인 위치이다.

* 리전안에는 여러개의 가용 영역 (availability Zone, AZ)이 존재한다. 

* 재해 발생시에도 서비스를 공급할 수 있도록 하기 위함.

* 리전이 한 곳에 있다면, 리전으로부터 먼 곳에서 서비스를 이용하면 속도의 문제가 있다.

* 거리가 멀수록 속도는 상대적으로 느리고, 노드를 많이 거칠 수록 속도는 떨어진다.

---

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/9026bcbf-6600-4332-a6ee-6b3f33aae710)

# Availability Zone (AZ)

* 가용 영역은 실제 데이터가 존재하는 데이터 센터이다.

* 천재지변 등에 의해 손상될 경우 다른 가용 영역에서 서비스 하기 위해 여러 곳에 가용 영역이 존재한다.

* 무중단 서비스를 가동하기 위함이다.

* 고가용성(High Availability)를 제공하기 위해 여러 가용 영역을 사용한다.

---

# VPC

* Amazon Virtual Private Cloud(Amazon VPC)를 사용하면 정의한 논리적으로 격리된 가상 네트워크에서 AWS 리소스를 시작할 수 있다.

* 이를 통해 사용자는 자체 독립된 가상 네트워크 환경을 구성하고, 가상 머신, 컨테이너, 서비스 등의 리소스를 네트워크 상에서 연결하고 통신할 수 있다.

```
# VPC의 Subnet

1. Public subnet = 외부랑 통신가능 // bastion, loadbalancer, 웹서버 등 // 즉 외부와 통신이 가능하다 = IGW 연결

2. Private subnet = 외부랑 통신이 불가능 // WAS, DB // 외부와 통신을 하지 않는다 = IGW 연결X
```

---

# VPC, EC2 인스턴스 생성 실습

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/1a501730-5639-4fff-8f58-252e0da0b474)

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/765ce7ad-ab3c-4808-a0e2-808aede4874d)

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/e9b587e7-dcb1-4414-8e11-d27e0ef78525)

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/94ba83a7-51b9-4bf4-866a-49944b4cb432)

```
VPC 생성후 IGW와 연결을 해야 외부와 통신할 수 있다. 
연결 후 Attached 상태로 전환됨을 확인. 
```

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/cf617de6-926e-48c4-b9d1-1a2dfd4d2ded)

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/04fd368a-9443-495b-92e6-d3ea84e10ce7)

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/f134b463-eb05-41ee-9619-2abd7dd2de2a)

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/1e9043b7-c4f1-45bb-9610-a6c2ab5b2f48)

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/1ef9a1b2-d3bf-4c37-8c11-063ac37c4c82)

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/c84326dd-ef29-4fa1-adbf-d56af2553bd3)

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/839d7547-f180-41c8-bee5-a509a45e7738)
```
퍼블릭으로 사용할 서브넷을 생성 한다.
해당 서브넷과 연결할 라우팅 테이블 생성 후 0.0.0.0/0 값을 추가로 라우팅하여 연결한다.
서브넷 설정 편집에서 `퍼블릭 IPv4 주소 자동 할당 활성화` 란을 활성해야 인스턴스 생성 시 default 값으로 활성화가 되어있다.
```
![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/4d87df86-1d6f-4857-8b65-63d86ecf53d9)

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/740d2f97-491a-4b4a-9038-181280e3da64)

```
EC2 인스턴스 생성시 네트워크 설정에서 만든 VPC와 서브넷을 선택하고 SSH외 추가적으로 실습을 위해 ICMP, PING 보안 그룹 규칙을 추가하여 인스턴스를 생성하였다.
```

![image](https://github.com/chaelynkang/chaelynkang.github.io/assets/128279031/ed2ca3a3-58bd-466c-a250-47b4a76a2ce5)

```
sudo -i
apt-get -y install nginx
curl [PublicIP] //verify
Private subnet1 대역으로 test2라는 이름의 인스턴스를 생성 후 키값이 담긴 pem파일의 내용을 복사.
vim kedu-keypair.pem 에 복붙
ssh -i kedu-keypair.pem ubuntu@10.10.2.248[VPC private IP]
644 too open 오류 메세지가 뜬다.
chmod 600 kedu-keypair.pem 변경하면 성공적으로 접속됨을 확인할 수 있다.
```
