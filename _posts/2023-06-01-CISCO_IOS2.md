---
layout: single
title: "Cisco IOS booting "
categories: keduit
tags: [ CiscoIOS ]
toc: true
comments: true
author_profile: true
sidebar:
    nav: "docs"
---

# CISCO IOS

## NVRAM

```   
- startup-config

- config-register 
```

* 모든 configure가 날아갔을때,현재 창에 나오는건 RAM에 있고 NVRAM에 startup running-config 로 불러올 수 있음. 

* NVRAM은 비휘발성 Config-register가 부팅순서를 바꿈

* Rom에 들어갈 data가 크면 bootstrip에 따로 들어간다.

* MINI IOS로 부팅하는것을 RxBoot라고 한다.

---

```
0X2100 : ROM Monitor

0x2102 : 정상부팅

0x2141 : MINI IOS -NVRAM(password 회피) // 운영체제가 망가졌을때 작동시킨다. 똑같이 startup-config를 회피

0x2142 : 정상 IOS -NVRAM(password 회피) // 운영체제가 정상작동중이나 starup-config를 회피하여 password를 회피
```

---


```
# IOS enable password 암호 잊어버렸을 때 부팅 실습

Router]
라우터 전원 ON 후
Ctrl+PAUSE BREAK 입력으로 ROM monitor 진입
confreg 0x2142
reset
en
conf t
enable password cisco
wr
config-register 0x2102
exit
reload
yes
enter

=> 0x2142 에서 enable password설정 후 0x2102로 다시 설정하여 부팅. show version으로 확인할 수 있다.
```

---

```
# TFTP 서버를 활용한 IOS Image 백업 

HOST PC를 192.168.0.1/24, gateway 192.168.0.254 설정

Router]
int g0/0
no shut
ip add 192.168.0.254 255.255.255.0
end
wr
ping 192.168.0.1 // success

HostPC]
tftpd32.chm, tftpd32.exe, tftpd32.ini 3개 파일을 'backup' 명으로 폴더를 생성하여 c:\backup 에 저장
tftpd32.exe 실행
Base Directory 경로를 C:\backup으로 설정
TFTP Server, TFTP Client 체크, OK
Server interface => HOST PC IP 선택 // HOST IP가 뜨지 않을 경우 .ini , .chm 파일 삭제 후 재 실행


Router]
dir
IOS file명을 복사
copy flash:/붙여넣기 tftp
host IP 192.168.100.1 입력 // 백업 해두었다
```

---

```
# TFTP를 활용한 IOS Image Upgrade

Router]
show version // 파일명 확인
copy tftp: flash: // tftp 서버에 new version이 존재할 경우에 tftp 서버의 Image 파일을 라우터 flash에 설정하겠다.
192.168.0.1 // tftp host ip 입력

HostPC]
Router image 파일의 확장명까지 복사

Router]
붙여넣기, 엔터
엔터 or 해당 프롬프트에서 파일명을 수정할 수 있다. 수정하면 수정 후 엔터
```

---


```
# IOS Image file이 손상되었을 때 복구하는 방법

가정)) 장비가 손상되었을 때 ROM Monitor로만 접근이 가능한 상황

Router]
dir
router IOS file명 확인
delete flash0:/파일명 붙여넣기
라우터 전원 껐다가 킨 후 ctrl+pause break로 ROM Monitor 접근
IP_ADDRESS=192.168.0.254 // 장비의 맨 처음 단자에 입력됨 g0/0, f0/0 등
IP_SUBNET_MASK=255.255.255.0
DEFAULT_GATEWAY=192.168.0.1 // TFTP HOST PC를 Gateway로 잡아준다.
TFTP_SERVER=192.168.0.1 // TFTP HOST PC IP
TFTP_FILE=TFTP에 있는 IOS file명 복사 붙여넣기
tftpdnld // g0/0 에 불이 들어오는 것을 확인할 수 있다.
reset


가정)) LAN카드도 없고 Router에 console cable만 연결되어 있는 경우

Router]
```







